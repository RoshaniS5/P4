<!-- Sleepy Starfish | Roshani Shrestha, Yuqing Wu, Angela Zhang, Hebe Huang
SoftDev Pd2
P04 -- Project Iris
2022-05-24
-->

<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/css/style.css">

    <title> Canvas </title>
    <link rel="stylesheet" href="../static/css/style.css">
  </head>

  <body>
    <!-- <nav class="irisNav"> -->
      <nav class="nav nav-pills nav-justified justify-content-center" style="box-shadow: 0px 2px 10px #eff5e2; height: 70px;">
        <a class="nav-link" id="active" href="/" style="height: 45px;">Home</a>
        <a class="nav-link" href="/newNote" style="height: 45px;">Make Note</a>
        <a class="nav-link" href="/about" style="height: 45px;">About</a>
    </nav>
    <!-- </nav> -->
    <div class="bgcolor">
      <div class="row d-flex justify-content-center">
        <table>
          <tr><th><br>{{error}}<br></th></tr>
          <tr>
          <td class="canvTD">
          <form id="data" method='GET'>
            <div class="colorOptions">
              <label for="bkgdpicker">Background Color Picker:</label>
              <input type="color" id="bkgdpicker" value="{{bkgdcol}}">
              <br>
              <label for="txtcolorpicker">Message Color Picker:</label>
              <input type="color" id="txtcolorpicker" value="{{txtcol}}">
              <br>
              <label for="penpicker">Pen Color Picker:</label>
              <input type="color" id="penpicker">
            </div>
            <br>
            <label for="sizepicker">Pen/Eraser Size:<br></label>
            <input type="range" min="1" max="25" value="2" id="sizepicker" style="width: 80%">
            <br>
            <form id="penoreraser">
              <input type="radio" id="pen" name="todrawornottd" value="Pen" checked>
              <label for="pen">Pen</label><br>
              <input type="radio" id="eraser" name="todrawornottd" value="Eraser">
              <label for="eraser">Eraser</label><br>
            </form>
            <button type="button" id="clearCanvas">Clear Canvas</button>
            <br>

            <hr style="height:2px; color:rgb(255, 232, 251); background-color:rgb(255, 232, 251); width: 90%">

            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon3" style="background-color: rgb(101, 120, 59); color: white;">To:</span>
              </div>
              <input type="text" name="person" id="person" maxlength="25" value={{recipient}}>
            </div>

            <div style="background-color: rgb(101, 120, 59); color: white;">Message:</div>
            <textarea name="message" id="message" maxlength="50" style="width: 100%;">{% if not message == None %}{{message}}{% endif %}</textarea>
            <div style="font-size: x-small; font-style: italic;">Maximum 45 characters<br>Line breaks will be converted to spaces</div><br>
            <button type="button" id="saveNote">Save</button>
            <button type="button" id="finishedNote">Submit</button>
            <!-- type="button" is necessary so this button doesn't submit the form
            this button will trigger js to make and submit another form -->
            <br><br>
          </form>
          <div id="old_can" value={{canva}}></div>
          </td>
          <td class="canvTD">
            <canvas id="text" width="500" height="500" style="position:absolute" style="pointer-events: none;">
            </canvas>
            <canvas id="can" width="500" height="500" style="position:absolute">
            </canvas>
            <canvas id="bkgd" width="500" height="500">
            </canvas>
          </td>
          </tr>
        </table>
      </div>


    Search for stickers to put on the canvas!
    <form action="/newNote" method="POST">
      <input type = "search" id = "stickers" name = "sticker_name">
      <button>Search</button>

      <input type = "hidden" name="recipient" id = "recipient">
      <input type = "hidden" name="canvas" id = "canvas">
      <input type="hidden" name="savedmsg" id="savedmsg">
      <input type="hidden" name="savedbkgdcolor" id="savedbkgdcolor">
      <input type="hidden" name="savedtxtcolor" id="savedtxtcolor">
    </form>
      {% for i in imgs %}
        <image src={{i}} height="100" width="100" class="sticker">
      {% endfor%}
    <p id="testing"></p>
    {% if not isThereKey %}
    <script>
      window.alert("Missing or Invalid API key for GIPHY!\nTo fix this, install a new key by following the steps detailed in the API card located in P4's README. Then, add this key to key_giphy.txt located in the keys directory of the app directory.");
    </script>
    {% endif %}
    <script src="../static/js/canvas.js"></script>

  </div>

  </body>
</html>
